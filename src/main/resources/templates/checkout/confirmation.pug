extends ../layout

block content
  .confirmation
    .checkout__progress(data-test="checkout-progress")
      .checkout__step.checkout__step--completed Buyer Info
      .checkout__step.checkout__step--completed Delivery
      .checkout__step.checkout__step--completed Payment
      .checkout__step.checkout__step--completed Confirmed

    .confirmation__message(data-test="confirmation-message")
      .confirmation__icon &#10003;
      h3.confirmation__title(data-test="confirmation-title") Your order has been placed successfully
      p.confirmation__reference Order Reference: #{orderConfirmation.sessionId()}

    .confirmation__details
      h3.confirmation__details-title Order Summary

      if orderConfirmation.buyerInfo()
        .confirmation__detail-section
          h4 Contact Information
          p #{orderConfirmation.buyerInfo().firstName()} #{orderConfirmation.buyerInfo().lastName()}
          p #{orderConfirmation.buyerInfo().email()}
          if orderConfirmation.buyerInfo().phone()
            p #{orderConfirmation.buyerInfo().phone()}

      if orderConfirmation.delivery()
        .confirmation__detail-section
          h4 Delivery Address
          p #{orderConfirmation.delivery().address().street()}
          if orderConfirmation.delivery().address().streetLine2()
            p #{orderConfirmation.delivery().address().streetLine2()}
          p #{orderConfirmation.delivery().address().city()}, #{orderConfirmation.delivery().address().postalCode()}
          if orderConfirmation.delivery().address().state()
            p #{orderConfirmation.delivery().address().state()}, #{orderConfirmation.delivery().address().country()}
          else
            p #{orderConfirmation.delivery().address().country()}

          h4 Shipping Method
          p #{orderConfirmation.delivery().shippingOption().name()}
          p Estimated Delivery: #{orderConfirmation.delivery().shippingOption().estimatedDelivery()}

      if orderConfirmation.payment()
        .confirmation__detail-section
          h4 Payment Method
          p #{orderConfirmation.payment().providerId()}

      if orderConfirmation.lineItems() && orderConfirmation.lineItems().size() > 0
        .confirmation__detail-section
          h4 Items Ordered
          each item in orderConfirmation.lineItems()
            .order-summary__item
              .order-summary__item-image
                if item.imageUrl()
                  img(src=item.imageUrl() alt=item.productName())
              span.order-summary__item-name #{item.productName()}
              span.order-summary__item-qty x#{item.quantity()}
              span.order-summary__item-price #{item.lineTotal()} #{item.currencyCode()}

      if orderConfirmation.totals()
        .confirmation__detail-section
          .order-summary__line
            span Subtotal
            span #{orderConfirmation.totals().subtotal()} #{orderConfirmation.totals().currencyCode()}
          if orderConfirmation.totals().shipping()
            .order-summary__line
              span Shipping
              span #{orderConfirmation.totals().shipping()} #{orderConfirmation.totals().currencyCode()}
          if orderConfirmation.totals().tax()
            .order-summary__line
              span Tax
              span #{orderConfirmation.totals().tax()} #{orderConfirmation.totals().currencyCode()}
          .order-summary__total
            span Total Paid
            span #{orderConfirmation.totals().total()} #{orderConfirmation.totals().currencyCode()}

    .confirmation__next-steps
      p We've sent a confirmation email to #{orderConfirmation.buyerInfo() ? orderConfirmation.buyerInfo().email() : 'your email address'}.
      p You can track your order status using your order reference.

    .form__actions
      a.btn.btn--primary.btn--lg(href="/" data-test="confirmation-continue-link") Continue Shopping
