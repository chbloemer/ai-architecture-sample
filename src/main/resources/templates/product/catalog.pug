extends ../layout

block content
  h2 Product Catalog

  p Total Products: #{totalProducts}

  if products && products.size() > 0
    .product-grid
      each product in products
        .product-card
          h3= product.name().value()
          p.product-description= product.description().value()

          .product-info
            .info-row
              span.label SKU:
              span.value= product.sku().value()

            .info-row
              span.label Category:
              span.value= product.category().value()

            .info-row
              span.label Price:
              span.value= product.price().amount().amount() + " " + product.price().amount().currency().getSymbol()

            .info-row
              span.label Stock:
              span.value= product.stock().quantity()

            .info-row
              span.label Status:
              if product.isAvailable()
                span.badge.badge-success Available
              else
                span.badge.badge-danger Out of Stock

          a.btn(href=`/products/${product.id().value()}`) View Details
  else
    .empty-state
      p No products available.
      p.
        #[a(href="/api/products") Use the REST API] to add products first.

  style.
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    .product-card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      background: #fafafa;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .product-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .product-card h3 {
      margin-top: 0;
      color: #2c3e50;
      font-size: 1.3em;
    }
    .product-description {
      color: #7f8c8d;
      margin-bottom: 15px;
      min-height: 40px;
    }
    .product-info {
      background: white;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 15px;
    }
    .info-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #ecf0f1;
    }
    .info-row:last-child {
      border-bottom: none;
    }
    .info-row .label {
      font-weight: 600;
      color: #34495e;
    }
    .info-row .value {
      color: #7f8c8d;
    }
    .btn {
      display: inline-block;
      background: #3498db;
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      text-decoration: none;
      font-weight: 500;
      text-align: center;
      transition: background 0.2s;
    }
    .btn:hover {
      background: #2980b9;
    }
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #7f8c8d;
    }
    .empty-state p {
      font-size: 1.1em;
    }
